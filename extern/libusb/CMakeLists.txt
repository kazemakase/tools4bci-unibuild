
set( BUNDLE_USE_libusb true CACHE BOOL "use the bundled version of the library?" )
set( BUNDLE_BUILD_libusb false CACHE BOOL "(re)build the bundled library?" )

if( ${BUNDLE_USE_libusb} )
  set( libusb_INCLUDE_DIRS ${T4B_LIBBUNDLE_ROOT}/include CACHE PATH "library include paths" )
  set( HAVE_libusb true CACHE INTERNAL "" )

else()
  if( ${UNIX} )
    find_package( PkgConfig )
    pkg_search_module( libusb_tmp libusb )
    if( ${libusb_tmp_FOUND} )
      message( "Found libusb version ${libusb_tmp_VERSION}." )
      set( libusb_LIBRARIES ${libusb_tmp_LIBRARIES} CACHE STRING "" )
      set( libusb_INCLUDE_DIRS ${libusb_tmp_INCLUDE_DIRS} CACHE STRING "" )
      set( HAVE_libusb true CACHE INTERNAL "" )
    else()
      set( HAVE_libusb false CACHE INTERNAL "" )
    endif()
  else()
    message( "Use bundled libusb on windows." )
    set( HAVE_libusb false CACHE INTERNAL "" )
  endif()
endif()

if( ${BUNDLE_BUILD_libusb} )
  message( FATAL_ERROR "Building libusb not yet implemented." )
endif()
